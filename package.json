{
    "private": true,
    "scripts": {
        "lint": "npx prettier . --write",
        "pre-commit": "npx lint-staged",
        "build": "npm run dev:all -- build",
        "docker-base": "docker-compose -f docker-compose.yml",
        "prepare:dev:node": "docker cp \"$(docker-compose -f docker-compose.yml -f compose/webpack.yml ps -q webpack):/usr/src/app/node_modules\" \"src/node_modules\"",
        "prepare:dev:ide_helper": "docker cp $(docker-compose ps -q app):/var/www/html/_ide_helper.php src && docker cp $(docker-compose ps -q app):/var/www/html/.phpstorm.meta.php src",
        "prepare:dev:vendor": "docker cp $(docker-compose ps -q app):/var/www/html/vendor src/vendor ",
        "prepare:dev": "npm run docker-base -- -f compose/webpack.yml up -d app webpack && npm run prepare:dev:node && npm run prepare:dev:vendor && npm run prepare:dev:ide_helper && npm run down",
        "docker-ops": "npm run docker-base -- -f compose/ops.yml -f compose/mailhog.yml  `[ -z \"$CI\" ] && echo \"-f compose/ops-volumes.yml\"`",
        "dev:all": "npm run docker-base -- -f compose/expose-web.yml -f compose/mailhog.yml -f compose/network.yml -f compose/phpmyadmin.yml -f compose/volumes.yml -f compose/webpack.yml",
        "dev": "npm run dev:all -- up",
        "dev:run": "npm run dev:all -- run",
        "dev:exec": "npm run dev:all -- exec",
        "prod": "npm run docker-base -- -f compose/expose-web.yml -f compose/production.yml up -d --force-recreate ",
        "down": "npm run dev:all -- down --remove-orphans",
        "has-db": "npm run docker-ops -- run has-db",
        "backup": "npm run docker-ops -- run backup",
        "seed": "npm run docker-ops -- run seed",
        "migrate": "npm run docker-ops -- run migrate",
        "test": "npm run docker-ops -- run test && docker cp `docker-compose -f docker-compose.yml -f compose/mailhog.yml -f compose/ops.yml ps --all -q test | head -n 1`:/var/www/results .",
        "dusk": "npm run docker-ops -- run dusk && docker cp `docker-compose -f docker-compose.yml -f compose/mailhog.yml -f compose/ops.yml ps --all -q dusk | head -n 1`:/var/www/html/tests/Browser/screenshots ./results/screenshots",
        "mtls:renew": "docker-compose exec -u root app sh -c '/etc/periodic/hourly/client-CA-nginx-renew.sh'",
        "certbot": "ENV_FILE=$(pwd)/.env docker-compose run --rm --entrypoint ' sh -c \"rm -rf /etc/letsencrypt/live/${PROJECT_DOMAIN} || true && certbot certonly --webroot -w /var/www/certbot -d ${PROJECT_DOMAIN} --register-unsafely-without-email --agree-tos --non-interactive \" ' certbot && docker-compose exec -u root app sh -c 'nginx -s reload'"
    },
    "devDependencies": {
        "@prettier/plugin-php": "^0.16.1",
        "husky": "^4.3.6",
        "lint-staged": "^10.5.3",
        "prettier": "^2.2.1"
    }
}
